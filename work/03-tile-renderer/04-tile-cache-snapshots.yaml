id: tile-cache-snapshots
status: complete
summary: Add local-only tile cache snapshots for fast reuse within a session.
context:
  - The design calls for a tile cache derived from the document, not synchronized.
  - Snapshot reuse reduces recompute cost after invalidation.
prerequisites:
  - work/03-tile-renderer/03-invalidation-and-bake.yaml
acceptance_criteria:
  - Cached tile bitmaps are reused when valid within a session.
  - Cache invalidation is deterministic and limited to affected tiles.
  - Tests cover cache hit/miss behavior for simple shape sequences.
  - All tests/typecheck/lint pass:
    - bun --filter @smalldraw/renderer-raster test
    - bun --filter @smalldraw/renderer-raster ts:check
    - bun --filter @smalldraw/renderer-raster lint
  - mise run validate:all
notes:
  - Persistent storage is out of scope; local-only is sufficient.
